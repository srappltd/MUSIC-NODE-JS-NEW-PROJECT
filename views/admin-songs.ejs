<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Free Music Online - Admin Login</title>
    <link rel="shortcut icon" href="https://www.wynk.in/assets/icons/icon-384x384.png" type="image/x-icon">
    <link href="https://cdn.jsdelivr.net/npm/remixicon@3.6.0/fonts/remixicon.css" rel="stylesheet">
    <link rel="stylesheet" href="../stylesheet/style.css">
    <link rel="stylesheet" href="../stylesheet/admin-dehboard.css">
</head>
<body>
    <div id="main">
        <%- include("admin-nav.ejs")%>
        <div class="admin-pg">
            <%- include("site-menu.ejs")%>
            <div class="admin-pg-rt">

                <!-- // song page  -->
                <div class="admim-pages song-page active">
                    <div class="cate-new song-new">
                        <h3>Songs List :-</h3>
                        <a><?xml version="1.0" ?><svg height="48" viewBox="0 0 48 48" width="48" xmlns="http://www.w3.org/2000/svg"><path d="M38 26H26v12h-4V26H10v-4h12V10h4v12h12v4z"/><path d="M0 0h48v48H0z" fill="none"/></svg> add Songs</a>
                    </div>
                    <div class="cate-btm">
                        <table>
                            <tr>
                                <th>Song Name</th>
                                <th>Artist Name</th>
                                <th>Analytics</th>
                                <th>Song Image</th>
                                <th style="width: 200px;">Action</th>
                            </tr>
                            <!-- // card  -->
                            <% if(allSongs != null){%>
                                <%allSongs.reverse().forEach(songs=>{%>
                                    <tr class="arti-tr" data-id="<%= songs._id%>" data-url="../uploads/<%= songs.url%>">
                                        <td class="cate-td song-name" data-name="hanny singh"><p class="song-title"><%= songs.title%></p></td>
                                        <td class="cate-td artist-name" data-name="<%= songs._id%>"><%= songs.artistid.name%></td>
                                        <td class="cate-td">
                                            <span class="analytic-span analy-view"><?xml version="1.0" ?><svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M.2 10a11 11 0 0 1 19.6 0A11 11 0 0 1 .2 10zm9.8 4a4 4 0 1 0 0-8 4 4 0 0 0 0 8zm0-2a2 2 0 1 1 0-4 2 2 0 0 1 0 4z"/><title><%= songs.views%></title></svg></span> 
                                            <span class="analytic-span analy-star"><?xml version="1.0" ?><svg style="enable-background:new 0 0 24 24;" version="1.1" viewBox="0 0 24 24" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="info"/><g id="icons"><path d="M12.9,2.6l2.3,5c0.1,0.3,0.4,0.5,0.7,0.6l5.2,0.8C22,9,22.3,10,21.7,10.6l-3.8,3.9c-0.2,0.2-0.3,0.6-0.3,0.9   l0.9,5.4c0.1,0.8-0.7,1.5-1.4,1.1l-4.7-2.6c-0.3-0.2-0.6-0.2-0.9,0l-4.7,2.6c-0.7,0.4-1.6-0.2-1.4-1.1l0.9-5.4   c0.1-0.3-0.1-0.7-0.3-0.9l-3.8-3.9C1.7,10,2,9,2.8,8.9l5.2-0.8c0.3,0,0.6-0.3,0.7-0.6l2.3-5C11.5,1.8,12.5,1.8,12.9,2.6z" id="favorite"/></g><title>0</title></svg></span> 
                                            <span class="analytic-span analy-down"><?xml version="1.0" ?><svg style="enable-background:new 0 0 24 24;" version="1.1" viewBox="0 0 24 24" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>0</title><style type="text/css">
                                            .st0{opacity:0.2;fill:none;stroke:#000000;stroke-width:5.000000e-02;stroke-miterlimit:10;}
                                        </style><g id="grid_system"/><g id="_icons"><g><path d="M11.3,15.7c0.1,0.1,0.2,0.2,0.3,0.2C11.7,16,11.9,16,12,16s0.3,0,0.4-0.1c0.1-0.1,0.2-0.1,0.3-0.2l4-4    c0.4-0.4,0.4-1,0-1.4s-1-0.4-1.4,0L13,12.6V5c0-0.6-0.4-1-1-1s-1,0.4-1,1v7.6l-2.3-2.3c-0.4-0.4-1-0.4-1.4,0s-0.4,1,0,1.4    L11.3,15.7z"/><path d="M19,13c-0.6,0-1,0.4-1,1v2c0,1.1-0.9,2-2,2H8c-1.1,0-2-0.9-2-2v-2c0-0.6-0.4-1-1-1s-1,0.4-1,1v2c0,2.2,1.8,4,4,4h8    c2.2,0,4-1.8,4-4v-2C20,13.4,19.6,13,19,13z"/></g></g></svg></span></td>
                                        <td class="cate-td song-img"><img src="../uploads/<%= songs.poster%>" alt=""></td>
                                        <td class="cate-td cate-flex">
                                            <a class="cate-edit-btn cate-edit"><?xml version="1.0" ?><svg class="feather feather-edit" fill="none" height="24" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/></svg></span>
                                            <a href="/admin/songdelete/<%= songs._id%>" class="cate-edit-btn cate-close"><?xml version="1.0" ?><svg class="feather feather-x" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><line x1="18" x2="6" y1="6" y2="18"/><line x1="6" x2="18" y1="6" y2="18"/></svg></span>
                                        </td>
                                    </tr>
                                <%})%>
                            <%}%>
                        </table>
                    </div>
                </div>
                
            </div>
        </div>


        <!-- // song form  -->
        <div class="song-form">
            <form action="/admin/song" class="category-form song-f-ac" method="post" enctype="multipart/form-data">
                <h3>add Songs</h3>
                <img src="" alt="" class="poster-img" style="width: 300px; margin: 0 auto;">
                <div class="poster-click" style="width: 100%;text-align: center;background-color: #FF295C;padding: 10px 0; border-radius: 3px; font-weight: 600;">Select Poster</div>
                <input type="file" hidden class="poster-input" accept="image/*" name="poster">
                <script>
                    document.querySelector(".poster-click").addEventListener("click",()=>{
                        document.querySelector(".poster-input").click()
                    })
                    document.querySelector(".poster-input").addEventListener("change",()=>{
                        document.querySelector(".poster-img").src = URL.createObjectURL(document.querySelector(".poster-input").files[0])
                    })
                </script>
                <div class="input">
                    <label for="">Song Name</label>
                    <input type="text" name="title" class="song-input-title" required id="" placeholder="Song name">
                </div>
                <div class="input">
                    <label for="">Artist Name</label>
                    <select name="artistname" id="option">
                        <% if(allArtists.length != 0){%>
                            <% allArtists.reverse().forEach(artists=>{%>
                                <option class="option artist-input-name" value="<%= artists._id%>"><%= artists.name%></option>
                            <%})%>
                            <%}%>
                    </select>

                </div>
                <div class="input">
                    <label for="">Category Name</label>
                    <select name="categoryname" id="option">
                        <% if(allCategorys.length != 0){%>
                            <% allCategorys.reverse().forEach(category=>{%>
                                <option class="option artist-input-name" value="<%= category._id%>"><%= category.title%></option>
                            <%})%>
                            <%}%>
                    </select>
                </div>
                
                
                <div class="input">
                    <label for="">Song Play</label>
                    <audio src="" controls class="song-audio"></audio>
                </div>
                
                <div class="input">
                    <label for="">Artist Image</label>
                    <input style="display: none;" accept="mp3/*" required class="select-input arti-select" type="file" name="url" placeholder="Audio name">
                    <div class="select-img">
                        <div class="select-title song-img-select">upload audio</div>
                        <div class="select-btn">Select</div>
                    </div>
                </div>
                <button>Save</button>
            </form>
            <div class="ct-f-close"><svg class="feather feather-x" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><line x1="18" x2="6" y1="6" y2="18"/><line x1="6" x2="18" y1="6" y2="18"/></svg></div>
        </div>

    </div>
    <script src="../script/admin.js"></script>
    <script>
        // category list add
        document.querySelector(".song-new a").addEventListener("click",()=>{
            document.querySelector(".song-form").style.display = "flex"
        })
        // close form when clicking
        document.querySelectorAll(".ct-f-close").forEach(elem=>{
            elem.addEventListener("click",()=>{
                document.querySelectorAll(".song-form").forEach(elfs=>{
                    elfs.style.display = "none"
                    //song null
                    document.querySelector(".song-f-ac").action = `/song`
                    document.querySelector(".song-f-ac h3").textContent = `Add song`
                    document.querySelector(".song-audio").src = ""
                    document.querySelector(".song-input-title").value = ""
                    document.querySelector(".artist-input-name").value = ""
                    document.querySelector(".song-img-select").textContent = "Upload audio"
                })
            })
        })
    </script>
</body>
</html>